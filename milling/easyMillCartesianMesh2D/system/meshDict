/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                |
| \\      /  F ield         | cfMesh: A library for mesh generation          |
|  \\    /   O peration     |                                                |
|   \\  /    A nd           | Author: Franjo Juretic                         |
|    \\/     M anipulation  | E-mail: franjo.juretic@c-fields.com            |
\*---------------------------------------------------------------------------*/

FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    object      meshDict;
}

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
// General m4 macros

  
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
// ************************************************************************* //
// Geometry constants - Shared among various m4 files 

// define(ygap, 0.01)           // length of air gap - works 
// define(ygap, 0.005)           // length of air gap - works 
// define(ygap, 0.02) // making the problem easier on purpose 
 // making gap large enough for mesh to work without refinement zones  
   
         // x-coordinate of point on stator surface 
         // y-coordinate of point on stator surface 

     // y-coordinate of center of first refinement zone  
         // height of first refinement zone 
                   // y-coordinate of center of second refinement zone  
                   // height of second refinement zone 
 // y-coordinate of center of third refinement zone  
     // height of third refinement zone 
        // y-coordinate of center of fourth refinement zone  
                   // height of fourth refinement zone
// ************************************************************************* //

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

surfaceFile     "geom.fms";

workflowControls
{
  // stopAfter boundaryLayerRefinement;
  // stopAfter boundaryLayerGeneration;
}
 
//maxCellSize     0.015;
maxCellSize     0.015;

// size of the cells at the boundary - optional - how to set this number relative to maxCellSize 
boundaryCellSize .005;
boundaryCellSizeRefinementThickness 0.01; 

boundaryLayers
{
    nLayers				10; // 2;		// (optional) global number of layers 

    thicknessRatio 			1.75; // 1.9; // 1.2;		// (optional) thickness ratio

    maxFirstLayerThickness 		0.5;		// (optional) max thickness of the first layer [m]

    patchBoundaryLayers
    {

       inlet
       {
         nLayers 0;
       }

       outlet
       {
         nLayers 0;
       }

       axis 
       {
         nLayers 0;
       }

//       stator1
//       {
//         nLayers 2;
//       }

    }

    untangleLayers 			1;		// (optional) deactivate untangling of boundary layers - activated by default

    optimiseLayer 			1;		// (optional) activates smoothing of boundary layers - deactivated by default

    optimisationParameters
    {
        nSmoothNormals 			5;		// (optional) number of iterations in the procedure for reducing normal variation
        relThicknessTol 		0.1; 		// (optional) maximum allowed thickness variation of thickness between two neigbouring points, divided by the distance between the points
        featureSizeFactor 		0.4;		// (optional) ratio between the maximum layer thickness and the estimated feature size
        reCalculateNormals 		1; 		// (optional) activate 1 or deactivate 0 calculation of normal
        maxNumIterations 		5;		// (optional) maximum number of iterations of the whole procedure
    }
}

// ************************************************************************* //
